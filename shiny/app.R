library(shiny)
library(shinydashboard)
library(dplyr)
library(tidyr)
library(purrr)
library(ggplot2)
library(plotly)
library(stringr)
library(DT)
library(scales)

source("../R/mod_activities_page.R", local = TRUE)
source("../R/mod_budget_page.R", local = TRUE)
source("../R/mod_recipients_page.R", local = TRUE)
source("../R/mod_about_page.R", local = TRUE)
source("../R/tables.R", local = TRUE)
source("../R/graphs.R", local = TRUE)
source("../R/utils.R", local = TRUE)

# ui ----------------------------------------------------------------------

ui <- function() {
  dashboardPage(
    
    # Header ------------------------------------------------------------------
    header = dashboardHeader(title = "Dutch Development Cooperation"),
    
    # Sidebar -----------------------------------------------------------------
    
    sidebar = dashboardSidebar(
      sidebarMenu(
        id = "tabs",
        menuItem("Activities", tabName = "activities", icon = icon("list-check")),
        menuItem("Budget", tabName = "budget", icon = icon("money-bill-trend-up")),
        menuItem("Recipients", tabName = "recipients", icon = icon("people-arrows")),
        menuItem("About", tabName = "about", icon = icon("circle-info"))
      ) # sidebarMenu
    ),
    
    # Body --------------------------------------------------------------------
    
    body = dashboardBody(
      tabItems(
        tabItem("activities", mod_activities_ui("activities_1")),
        tabItem("budget", mod_budget_ui("budget_1")),
        tabItem("recipients", mod_recipients_ui("recipients_1")),
        tabItem("about", mod_about_ui("about_1"))
      ) # tabItems
    ) # dashboardBody
  ) # dashboardpage
} # ui function

# server ------------------------------------------------------------------

# Define server logic
server <- function(input, output) {
  mod_activities_server("activities_1")
  mod_budget_server("budget_1")
}

# Run the application
shinyApp(ui, server)
